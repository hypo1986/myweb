<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>vue简介及vue-element-amdin框架应用 | 王海波的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近接到一个基金cms系统需求，之前我们组内搭建类似项目用react居多，这次因为是新启项目，打算用vue尝试一下，之前也有看过vue文档并搭建过小项目，再者vue本身就上手快，于是再撸一遍api,找一套适合的框架（vue-element-amdin），就可以开始干了。service端接口我们选择自己用mongodb搭建（是同事用mongodb+typescript搭建的，之后我打算把他的分享转过">
<meta name="keywords" content="vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vue简介及vue-element-amdin框架应用">
<meta property="og:url" content="http://www.hypo1986.com/blog/2019/10/22/2019-10-22-vue-element-admin/index.html">
<meta property="og:site_name" content="王海波的博客">
<meta property="og:description" content="最近接到一个基金cms系统需求，之前我们组内搭建类似项目用react居多，这次因为是新启项目，打算用vue尝试一下，之前也有看过vue文档并搭建过小项目，再者vue本身就上手快，于是再撸一遍api,找一套适合的框架（vue-element-amdin），就可以开始干了。service端接口我们选择自己用mongodb搭建（是同事用mongodb+typescript搭建的，之后我打算把他的分享转过">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-05T05:49:42.658Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue简介及vue-element-amdin框架应用">
<meta name="twitter:description" content="最近接到一个基金cms系统需求，之前我们组内搭建类似项目用react居多，这次因为是新启项目，打算用vue尝试一下，之前也有看过vue文档并搭建过小项目，再者vue本身就上手快，于是再撸一遍api,找一套适合的框架（vue-element-amdin），就可以开始干了。service端接口我们选择自己用mongodb搭建（是同事用mongodb+typescript搭建的，之后我打算把他的分享转过">
  
    <link rel="alternate" href="/blog/atom.xml" title="王海波的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">王海波的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">人生无难易，为之则易</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">首页</a>
        
          <a class="main-nav-link" href="/blog/archives">归档</a>
        
          <a class="main-nav-link" href="/blog/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.hypo1986.com/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2019-10-22-vue-element-admin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2019/10/22/2019-10-22-vue-element-admin/" class="article-date">
  <time datetime="2019-10-22T02:11:37.000Z" itemprop="datePublished">2019-10-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/前端/">前端</a>
  </div>

    
  <div class="article-category">
    <span id="/blog/2019/10/22/2019-10-22-vue-element-admin/" class="leancloud-visitors article-category-link" data-flag-title="vue简介及vue-element-amdin框架应用">
      <em class="post-meta-item-text">阅读量 </em>
      <i class="leancloud-visitors-count"></i>
    </span>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      vue简介及vue-element-amdin框架应用
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近接到一个基金cms系统需求，之前我们组内搭建类似项目用react居多，这次因为是新启项目，打算用vue尝试一下，之前也有看过vue文档并搭建过小项目，再者vue本身就上手快，于是再撸一遍api,找一套适合的框架（vue-element-amdin），就可以开始干了。service端接口我们选择自己用mongodb搭建（是同事用mongodb+typescript搭建的，之后我打算把他的分享转过来哈哈哈）。</p>
<h1 id="一、vue简介"><a href="#一、vue简介" class="headerlink" title="一、vue简介"></a>一、vue简介</h1><p>Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p>
<a id="more"></a>
<h5 id="渐进式框架的理解"><a href="#渐进式框架的理解" class="headerlink" title="渐进式框架的理解"></a>渐进式框架的理解</h5><p>提供足够的选择，并且没有很多强制性的要求。<br>渐进也可以理解为一步一步的意思，大概意思就是使用Vue的时候，并不需要把整个框架的所有东西都用上，可以根据实际情况选择你需要的部分。</p>
<h5 id="自底向上逐层应用"><a href="#自底向上逐层应用" class="headerlink" title="自底向上逐层应用"></a>自底向上逐层应用</h5><p>由基层开始做起，把基础的东西写好，再逐层往上添加效果和功能。</p>
<p>Vue 的目标是通过尽可能简单的 API 实现响应的数据绑定和组合的视图组件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">var app = new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: &apos;Hello Vue!&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>先看一个简单实例代码结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-selection-banner&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;16&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;banner-preview :list=&quot;list&quot; :show-user-types=&quot;showUserTypes&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">        &lt;banner-table :list=&quot;list&quot; :user-type-options=&quot;userTypeOptions&quot; @updateList=&quot;getList&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import BannerPreview from &apos;./components/BannerPreview&apos;</span><br><span class="line">import BannerTable from &apos;./components/BannerTable&apos;</span><br><span class="line">import &#123; bannerList &#125; from &apos;@/api/selection&apos;</span><br><span class="line">import &#123; userTypeInfo &#125; from &apos;@/api/common&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;BannerSelection&apos;,</span><br><span class="line">  components: &#123; BannerPreview, BannerTable &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: null,</span><br><span class="line">      userTypeOptions: [],</span><br><span class="line">      showUserTypes: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getList()</span><br><span class="line">    userTypeInfo(&#123; version: &apos;1.0&apos; &#125;).then(response =&gt; &#123;</span><br><span class="line">      this.userTypeOptions = response.data</span><br><span class="line">      this.showUserTypes = (response.data || []).filter((userType) =&gt; &#123;</span><br><span class="line">        return userType.type !== &apos;0&apos;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getList() &#123;</span><br><span class="line">      bannerList().then(response =&gt; &#123;</span><br><span class="line">        const &#123; items &#125; = response.data || []</span><br><span class="line">        this.list = items.sort((a, b) =&gt; b.status - a.status)</span><br><span class="line">      &#125;).catch(err =&gt; console.log(err))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.app-selection-banner&#123;</span><br><span class="line">  background-color:#eee;</span><br><span class="line">  padding:16px;</span><br><span class="line">  .el-col &#123;</span><br><span class="line">    padding: 0 6px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>组件BannerPreview.vue : </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;md-wrap&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;md-title&quot;&gt;预览区&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;md-text&quot;&gt;</span><br><span class="line">      &lt;div v-for=&quot;item in showUserTypes&quot; :key=&quot;item.type&quot; class=&quot;block&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;demonstration&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;el-carousel v-if=&quot;previewList(item.type).length&quot; :autoplay=&quot;false&quot; arrow=&quot;never&quot; trigger=&quot;click&quot; height=&quot;100px&quot;&gt;</span><br><span class="line">          &lt;el-carousel-item v-for=&quot;(child, key) in previewList(item.type)&quot; :key=&quot;key&quot;&gt;</span><br><span class="line">            &lt;a :href=&quot;child.link&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">              &lt;img class=&quot;list-img&quot; :src=&quot;child.imgUrl&quot;&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">          &lt;/el-carousel-item&gt;</span><br><span class="line">        &lt;/el-carousel&gt;</span><br><span class="line">        &lt;div v-else class=&quot;no-data&quot;&gt;暂无数据&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;BannerPreview&apos;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: null</span><br><span class="line">    &#125;,</span><br><span class="line">    showUserTypes: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    previewList(type) &#123;</span><br><span class="line">      const newArr = this.list || []</span><br><span class="line">      return newArr.length &gt; 0 &amp;&amp; newArr.filter((item) =&gt; &#123;</span><br><span class="line">        const &#123; userType &#125; = item || &apos;&apos;</span><br><span class="line">        return item.status === &apos;2&apos; &amp;&amp; (userType.includes(type) || userType.includes(&apos;0&apos;))</span><br><span class="line">      &#125;).slice(0, 5)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.md-wrap&#123;</span><br><span class="line">  background-color:#fff;</span><br><span class="line">  .md-title&#123;</span><br><span class="line">    line-height: 50px;</span><br><span class="line">    border-bottom:1px #eee solid;</span><br><span class="line">    padding-left: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">  .md-text&#123;</span><br><span class="line">    padding: 16px;</span><br><span class="line">    .no-data&#123;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      color: #999;</span><br><span class="line">      padding: 10px 0;</span><br><span class="line">    &#125;</span><br><span class="line">    .demonstration&#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      padding-bottom: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    .block&#123;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">    .list-img&#123;</span><br><span class="line">      height: 100%;</span><br><span class="line">      width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .el-carousel__item h3 &#123;</span><br><span class="line">    color: #475669;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    opacity: 0.75;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">    margin: 0;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .el-carousel__item:nth-child(2n) &#123;</span><br><span class="line">     background-color: #99a9bf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .el-carousel__item:nth-child(2n+1) &#123;</span><br><span class="line">     background-color: #d3dce6;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p>每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会。</p>
<p>比如 created 钩子可以用来在一个实例被创建之后执行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    a: 1</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function () &#123;</span><br><span class="line">    // `this` 指向 vm 实例</span><br><span class="line">    console.log(&apos;a is: &apos; + this.a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">// =&gt; &quot;a is: 1&quot;</span><br></pre></td></tr></table></figure>

<p>也有一些其它的钩子，在实例生命周期的不同阶段被调用，如 mounted、updated 和 destroyed。生命周期钩子的 this 上下文指向调用它的 Vue 实例。</p>
<p>*<font color="red">注意：</font>不要在选项属性或回调上使用箭头函数，比如 created: () =&gt; console.log(this.a) 或 vm.$watch(‘a’, newValue =&gt; this.myMethod())。因为箭头函数并没有 this，this 会作为变量一直向上级词法作用域查找，直至找到为止，经常导致 Uncaught TypeError: Cannot read property of undefined 或 Uncaught TypeError: this.myMethod is not a function 之类的错误。*</p>
<h4 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h4><p>模板内的表达式非常便利，但是设计它们的初衷是用于简单运算的。在模板中放入太多的逻辑会让模板过重且难以维护。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;example&quot;&gt;</span><br><span class="line">  &#123;&#123; message.split(&apos;&apos;).reverse().join(&apos;&apos;) &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>在这个地方，模板不再是简单的声明式逻辑。你必须看一段时间才能意识到，这里是想要显示变量 message 的翻转字符串。当你想要在模板中多次引用此处的翻转字符串时，就会更加难以处理。</p>
<p>所以，对于任何复杂逻辑，你都应当使用计算属性。</p>
<p>基础例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;example&quot;&gt;</span><br><span class="line">  &lt;p&gt;Original message: &quot;&#123;&#123; message &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#example&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: &apos;Hello&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 计算属性的 getter</span><br><span class="line">    reversedMessage: function () &#123;</span><br><span class="line">      // `this` 指向 vm 实例</span><br><span class="line">      return this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Original message: “Hello”<br>Computed reversed message: “olleH”</p>
<h4 id="计算属性缓存-vs-方法"><a href="#计算属性缓存-vs-方法" class="headerlink" title="计算属性缓存 vs 方法"></a>计算属性缓存 vs 方法</h4><p>你可能已经注意到我们可以通过在表达式中调用方法来达到同样的效果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Reversed message: &quot;&#123;&#123; reversedMessage() &#125;&#125;&quot;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">// 在组件中</span><br><span class="line">methods: &#123;</span><br><span class="line">  reversedMessage: function () &#123;</span><br><span class="line">    return this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以将同一函数定义为一个方法而不是一个计算属性。两种方式的最终结果确实是完全相同的。然而，不同的是计算属性是基于它们的响应式依赖进行缓存的。只在相关响应式依赖发生改变时它们才会重新求值。这就意味着只要 message 还没有发生改变，多次访问 reversedMessage 计算属性会立即返回之前的计算结果，而不必再次执行函数。</p>
<p>这也同样意味着下面的计算属性将不再更新，因为 Date.now() 不是响应式依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  now: function () &#123;</span><br><span class="line">    return Date.now()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相比之下，每当触发重新渲染时，调用方法将总会再次执行函数。</p>
<p>我们为什么需要缓存？假设我们有一个性能开销比较大的计算属性 A，它需要遍历一个巨大的数组并做大量的计算。然后我们可能有其他的计算属性依赖于 A 。如果没有缓存，我们将不可避免的多次执行 A 的 getter！如果你不希望有缓存，请用方法来替代。</p>
<h4 id="计算属性-vs-侦听属性"><a href="#计算属性-vs-侦听属性" class="headerlink" title="计算属性 vs 侦听属性"></a>计算属性 vs 侦听属性</h4><p>Vue 提供了一种更通用的方式来观察和响应 Vue 实例上的数据变动：侦听属性。当你有一些数据需要随着其它数据变动而变动时，你很容易滥用 watch——特别是如果你之前使用过 AngularJS。然而，通常更好的做法是使用计算属性而不是命令式的 watch 回调。细想一下这个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;demo&quot;&gt;&#123;&#123; fullName &#125;&#125;&lt;/div&gt;</span><br><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#demo&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Foo&apos;,</span><br><span class="line">    lastName: &apos;Bar&apos;,</span><br><span class="line">    fullName: &apos;Foo Bar&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    firstName: function (val) &#123;</span><br><span class="line">      this.fullName = val + &apos; &apos; + this.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    lastName: function (val) &#123;</span><br><span class="line">      this.fullName = this.firstName + &apos; &apos; + val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上面代码是命令式且重复的。将它与计算属性的版本进行比较：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &apos;#demo&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Foo&apos;,</span><br><span class="line">    lastName: &apos;Bar&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    fullName: function () &#123;</span><br><span class="line">      return this.firstName + &apos; &apos; + this.lastName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>好得多了，不是吗？</p>
<h4 id="侦听器"><a href="#侦听器" class="headerlink" title="侦听器"></a>侦听器</h4><p>虽然计算属性在大多数情况下更合适，但有时也需要一个自定义的侦听器。这就是为什么 Vue 通过 watch 选项提供了一个更通用的方法，来响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;watch-example&quot;&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Ask a yes/no question:</span><br><span class="line">    &lt;input v-model=&quot;question&quot;&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; answer &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">var watchExampleVM = new Vue(&#123;</span><br><span class="line">  el: &apos;#watch-example&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    question: &apos;&apos;,</span><br><span class="line">    answer: &apos;I cannot give you an answer until you ask a question!&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    // 如果 `question` 发生改变，这个函数就会运行</span><br><span class="line">    question: function (newQuestion, oldQuestion) &#123;</span><br><span class="line">      this.answer = &apos;Waiting for you to stop typing...&apos;</span><br><span class="line">      this.debouncedGetAnswer()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function () &#123;</span><br><span class="line">    // `_.debounce` 是一个通过 Lodash 限制操作频率的函数。</span><br><span class="line">    // 在这个例子中，我们希望限制访问 yesno.wtf/api 的频率</span><br><span class="line">    // AJAX 请求直到用户输入完毕才会发出。想要了解更多关于</span><br><span class="line">    // `_.debounce` 函数 (及其近亲 `_.throttle`) 的知识，</span><br><span class="line">    // 请参考：https://lodash.com/docs#debounce</span><br><span class="line">    this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getAnswer: function () &#123;</span><br><span class="line">      if (this.question.indexOf(&apos;?&apos;) === -1) &#123;</span><br><span class="line">        this.answer = &apos;Questions usually contain a question mark. ;-)&apos;</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">      this.answer = &apos;Thinking...&apos;</span><br><span class="line">      var vm = this</span><br><span class="line">      axios.get(&apos;https://yesno.wtf/api&apos;)</span><br><span class="line">        .then(function (response) &#123;</span><br><span class="line">          vm.answer = _.capitalize(response.data.answer)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(function (error) &#123;</span><br><span class="line">          vm.answer = &apos;Error! Could not reach the API. &apos; + error</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在这个示例中，使用 watch 选项允许我们执行异步操作 (访问一个 API)，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。</p>
<h1 id="二、Vue与React两个框架的区别和优势对比"><a href="#二、Vue与React两个框架的区别和优势对比" class="headerlink" title="二、Vue与React两个框架的区别和优势对比"></a>二、Vue与React两个框架的区别和优势对比</h1><p>Vue和React两个JavaScript框架都是当下比较受欢迎的，他们两者之间的区别有哪些，各自的优缺点是什么？</p>
<h4 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h4><p>除非你一直不关注前端的发展，不然你肯定听说过由Facebook创建的JavaScript UI框架——React。它支撑着包括Instagram在内的大多数Facebook网站。React与当时流行的jQuery,Backbone.js和Angular 1等框架不同，它的诞生改变了JavaScript的世界。其中最大的变化是React推广了Virtual DOM并创造了新的语法——JSX，JSX允许开发者在JavaScript中书写HTML（译者注：即HTML in JavaScript）。</p>
<p>Vue致力解决的问题与React一致，但却提供了另外一套解决方案。Vue使用模板系统而不是JSX，使其对现有应用的升级更加容易。这是因为模板用的就是普通的HTML，通过Vue来整合现有的系统是比较容易的，不需要整体重构。同时Vue声称它更容易学习，我们最近接触Vue，就能证明所言非虚。关于Vue还需要说的是，Vue主要是由一位开发者进行维护的，而不像React一样由如Facebook这类大公司维护。</p>
<h4 id="相似之处"><a href="#相似之处" class="headerlink" title="相似之处"></a>相似之处</h4><p>React与Vue存在很多相似之处：</p>
<ul>
<li>使用 Virtual DOM</li>
<li>提供了响应式 (Reactive) 和组件化 (Composable) 的视图组件。</li>
<li>将注意力集中保持在核心库，而将其他功能如路由和全局状态管理交给相关的库。</li>
</ul>
<h4 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h4><p>啊哈，人们经常说Virtual DOM是什么呢？</p>
<p>Vue.js(2.0版本)与React的其中最大一个相似之处，就是他们都使用了一种叫’Virtual DOM’的东西。所谓的Virtual DOM基本上说就是它名字的意思：虚拟DOM，DOM树的虚拟表现。它的诞生是基于这么一个概念：改变真实的DOM状态远比改变一个JavaScript对象的花销要大得多。</p>
<p>Virtual DOM是一个映射真实DOM的JavaScript对象，如果需要改变任何元素的状态，那么是先在Virtual DOM上进行改变，而不是直接改变真实的DOM。当有变化产生时，一个新的Virtual DOM对象会被创建并计算新旧Virtual DOM之间的差别。之后这些差别会应用在真实的DOM上。</p>
<p>例子如下，我们可以看看下面这个列表在HTML中的代码是如何写的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul class=&quot;list&quot;&gt;</span><br><span class="line">  &lt;li&gt;item 1&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;item 2&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>而在JavaScript中，我们可以用对象简单地创造一个针对上面例子的映射：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &apos;ul&apos;, </span><br><span class="line">    props: &#123;&apos;class&apos;: &apos;list&apos;&#125;, </span><br><span class="line">    children: [</span><br><span class="line">        &#123; type: &apos;li&apos;, props: &#123;&#125;, children: [&apos;item 1&apos;] &#125;,</span><br><span class="line">        &#123; type: &apos;li&apos;, props: &#123;&#125;, children: [&apos;item 2&apos;] &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>真实的Virtual DOM会比上面的例子更复杂，但它本质上是一个嵌套着数组的原生对象。</p>
<p>当新一项被加进去这个JavaScript对象时，一个函数会计算新旧Virtual DOM之间的差异并反应在真实的DOM上。计算差异的算法是高性能框架的秘密所在，React和Vue在实现上有点不同。</p>
<p>Vue宣称可以更快地计算出Virtual DOM的差异，这是由于它在渲染过程中，会跟踪每一个组件的依赖关系，不需要重新渲染整个组件树。</p>
<p>而对于React而言，每当应用的状态被改变时，全部子组件都会重新渲染。当然，这可以通过shouldComponentUpdate这个生命周期方法来进行控制，但Vue将此视为默认的优化。</p>
<p>在react开发中，经常会遇到组件重复渲染的问题，父组件一个state的变化，就会导致以该组件的所有子组件都重写render，尽管绝大多数子组件的props没有变化</p>
<p>render什么时候会触发</p>
<p>react的生命周期分为了三个阶段：生成期、存在期、销毁期，这样在create、props、state、unMount状态变化时我们可以清楚的看到reacte触发了哪些生命周期钩子以及什么时候会render。</p>
<p>如何避免这些不必要的render:</p>
<ul>
<li>shouldComponentUpdate()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState)</span><br></pre></td></tr></table></figure>

<p>使用shouldComponentUpdate()以让React知道当前状态或属性的改变是否不影响组件的输出，默认返回ture，返回false时不会重写render，而且该方法并不会在初始化渲染或当使用forceUpdate()时被调用，我们要做的只是这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">  return nextState.someData !== this.state.someData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是，state里的数据这么多，还有对象，还有复杂类型数据，react的理念就是拆分拆分再拆分，这么多子组件，我要每个组件都去自己一个一个对比吗？？不存在的，这么麻烦，要知道我们的终极目标是不劳而获-_-</p>
<ul>
<li>React.PureComponent</li>
</ul>
<p>React.PureComponent 与 React.Component 几乎完全相同，但 React.PureComponent 通过props和state的浅对比来实现 shouldComponentUpate()。如果对象包含复杂的数据结构，它可能会因深层的数据不一致而产生错误的否定判断(表现为对象深层的数据已改变视图却没有更新）</p>
<p>关注点：无论组件是否是 PureComponent，如果定义了 shouldComponentUpdate()，那么会调用它并以它的执行结果来判断是否 update。在组件未定义 shouldComponentUpdate() 的情况下，会判断该组件是否是 PureComponent，如果是的话，会对新旧 props、state 进行 shallowEqual 比较，一旦新旧不一致，会触发 update。</p>
<p>小结：如果你的应用中，交互复杂，需要处理大量的UI变化，那么使用Virtual DOM是一个好主意。如果你更新元素并不频繁，那么Virtual DOM并不一定适用，性能很可能还不如直接操控DOM。</p>
<h4 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h4><p>React与Vue都鼓励组件化应用。这本质上说，是建议你将你的应用分拆成一个个功能明确的模块，每个模块之间可以通过合适的方式互相联系。关于组件化的例子可以在这篇文章的中间部分被找到:</p>
<p>你可以认为组件就是用户界面中的一小块。如果让我来设计Facebook的UI界面，那么聊天窗口会是一个组件，评论会是另一个组件，不断更新的好友列表也会作为一个组件。</p>
<p>在Vue中，如果你遵守一定的规则，你可以使用单文件组件.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;li class=&quot;pasta-dish list-unstyled&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col-md-3&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;this.item.image&quot; :alt=&quot;this.item.name&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col-md-9 text-left&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123;this.item.name&#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &#123;&#123;this.item.desc&#125;&#125;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;button v-on:click=&quot;addToOrderNew&quot; class=&quot;btn btn-primary&quot;&gt;Add to order&lt;/button&gt; &lt;mark&gt;&#123;&#123;this.orders&#125;&#125;&lt;/mark&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &apos;pasta-item&apos;,</span><br><span class="line">    props: [&apos;item&apos;],</span><br><span class="line">    data:  function()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            orders: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        addToOrderNew: function(y)&#123;</span><br><span class="line">            this.orders += 1;</span><br><span class="line">            this.$emit(&apos;order&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style src=&quot;./Pasta.css&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>正如上面你看到的例子中，HTML, JavaScript和CSS都写在一个文件之中。你不再需要在.vue组件文件中引入CSS，虽然这也是可以的。</p>
<p>React也是非常相似的，JavaScript与JSX被写入同一个组件文件中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">class PastaItem extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        const &#123; details, index &#125; = this.props;</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line">            &lt;li className=&quot;pasta-dish list-unstyled&quot;&gt;</span><br><span class="line">                &lt;div className=&quot;row&quot;&gt;</span><br><span class="line">                    &lt;div className=&quot;col-md-3&quot;&gt;</span><br><span class="line">                        &lt;img src=&#123;details.image&#125; alt=&#123;details.name&#125; /&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div className=&quot;col-md-9 text-left&quot;&gt;</span><br><span class="line">                        &lt;h3&gt;&#123;details.name&#125;&lt;/h3&gt;</span><br><span class="line">                        &lt;p&gt;</span><br><span class="line">                            &#123;details.desc&#125;</span><br><span class="line">                        &lt;/p&gt;</span><br><span class="line">                        &lt;button onClick=&#123;() =&gt; this.props.addToOrder(index)&#125; className=&quot;btn btn-primary&quot;&gt;Add to order&lt;/button&gt; &lt;mark&gt;&#123;this.props.orders || 0&#125;&lt;/mark&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default PastaItem;</span><br></pre></td></tr></table></figure>

<p>Props<br>在上面两个例子中，我们可以看到React和Vue都有’props’的概念，这是properties的简写。props在组件中是一个特殊的属性，允许父组件往子组件传送数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object.keys(this.state.pastadishes).map(key =&gt;</span><br><span class="line">    &lt;PastaItem index=&#123;key&#125; key=&#123;key&#125; details=&#123;this.state.pastadishes[key]&#125; addToOrder=&#123;this.addToOrder&#125; orders=&#123;this.state.orders[key]&#125; /&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>上面的JSX库组中，index, key, details, orders 与 addToOrder都是props，数据会被下传到子组件PastaItem中去。</p>
<p>在React中，这是必须的，它依赖一个“单一数据源”作为它的“状态”。</p>
<p>而在Vue中，props略有不同。它们一样是在组件中被定义，但Vue依赖于模板语法，你可以通过模板的循环函数更高效地展示传入的数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pasta-item v-for=&quot;(item, key) in samplePasta&quot; :item=&quot;item&quot; :key=&quot;key&quot; @order=&quot;handleOrder(key)&quot;&gt;&lt;/pasta-item&gt;</span><br></pre></td></tr></table></figure>

<p>这是模板的实现，但这代码完全能工作，然而在React中展现相同数据会更麻烦一点。</p>
<h4 id="构建工具"><a href="#构建工具" class="headerlink" title="构建工具"></a>构建工具</h4><p>React和Vue都有自己的构建工具，你可以使用它快速搭建开发环境。React可以使用Create React App (CRA)，而Vue对应的则是vue-cli。两个工具都能让你得到一个根据最佳实践设置的项目模板。</p>
<p>由于CRA有很多选项，使用起来会稍微麻烦一点。这个工具会逼迫你使用Webpack和Babel。而vue-cli则有模板列表可选，能按需创造不同模板，使用起来更灵活一点。</p>
<p>事实上说，两个工具都非常好用，都能为你建立一个好环境。而且如果可以不配置Webpack的话，我认为这是天大的好事。</p>
<h4 id="Chrome-开发工具"><a href="#Chrome-开发工具" class="headerlink" title="Chrome 开发工具"></a>Chrome 开发工具</h4><p>React和Vue都有很好的Chrome扩展工具去帮助你找出bug。它们会检查你的应用，让你看到Vue或者React中的变化。你也可以看到应用中的状态，并实时看到更新。</p>
<p>React的开发工具: <a href="https://cdn.deliciousbrains.com/content/uploads/2017/06/15151112/react-devtools.mp4" target="_blank" rel="noopener">https://cdn.deliciousbrains.com/content/uploads/2017/06/15151112/react-devtools.mp4</a></p>
<p>Vue的开发工具: <a href="https://cdn.deliciousbrains.com/content/uploads/2017/06/15151111/vue-devtools.mp4" target="_blank" rel="noopener">https://cdn.deliciousbrains.com/content/uploads/2017/06/15151111/vue-devtools.mp4</a></p>
<h4 id="配套框架"><a href="#配套框架" class="headerlink" title="配套框架"></a>配套框架</h4><p>Vue与React最后一个相似但略有不同之处是它们配套框架的处理方法。相同之处在于，两个框架都专注于UI层，其他的功能如路由、状态管理等都交由同伴框架进行处理。</p>
<p>而不同之处是在于它们如何关联它们各自的配套框架。Vue的核心团队维护着vue-router和vuex，它们都是作为官方推荐的存在。而React的react-router和react-redux则是由社区成员维护，它们都不是官方维护的。</p>
<h4 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h4><p>Vue与react有很多的相似之处，但他们也有完全不一致的地方。</p>
<p>模板 vs JSX：</p>
<p>在 React 中，一切都是 JavaScript。<br>在 React 中，所有的组件的渲染功能都依靠 JSX。<br>JSX 是使用 XML 语法编写 JavaScript 的一种语法糖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">import &#123; </span><br><span class="line">  SearchContainer,</span><br><span class="line">  SearchContent</span><br><span class="line">&#125; from &apos;./styledComponent.js&apos;</span><br><span class="line"></span><br><span class="line">import search from &apos;images/search.png&apos;</span><br><span class="line"></span><br><span class="line">class Search extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;SearchContainer&gt;</span><br><span class="line">        &lt;SearchContent &#123; ...this.props &#125;&gt;</span><br><span class="line">          &lt;img src=&#123;search&#125; alt=&quot;&quot;/&gt;</span><br><span class="line">          &lt;span&gt;想吃什么搜这里，川菜&lt;/span&gt;</span><br><span class="line">        &lt;/SearchContent&gt;</span><br><span class="line">      &lt;/SearchContainer&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Search</span><br></pre></td></tr></table></figure>

<p>vue是把html，css，js组合到一起，用各自的处理方式<br>Vue 设置样式的默认方法是单文件组件里类似 style 的标签。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-movie&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;white-bg topbar-bg&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;city-entry&quot;&gt;</span><br><span class="line">        &lt;router-link tag=&quot;span&quot; to=&quot;/cities&quot; class=&quot;city-name&quot;&gt;北京&lt;/router-link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;div class=&quot;switch-hot&quot;&gt;</span><br><span class="line">        &lt;router-link tag=&quot;div&quot; to=&quot;/home/movies/intheater&quot; active-class=&quot;active&quot; class=&quot;hot-item&quot;&gt;正在热映&lt;/router-link&gt;</span><br><span class="line">        &lt;router-link tag=&quot;div&quot; to=&quot;/home/movies/coming&quot; active-class=&quot;active&quot; class=&quot;hot-item&quot;&gt;即将上映&lt;/router-link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;transition :name=&quot;transitionName&quot;&gt;</span><br><span class="line">      &lt;router-view class=&quot;movies-outlet&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      transitionName: &apos;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    $route (to, from) &#123;</span><br><span class="line">      if ( to.meta &gt; from.meta ) &#123;</span><br><span class="line">        this.transitionName = &apos;slide-left&apos;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.transitionName = &apos;slide-right&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;stylus&quot; scoped&gt;</span><br><span class="line">@import &apos;~styles/border.styl&apos;</span><br><span class="line">@import &apos;~styles/variables.styl&apos;</span><br><span class="line"></span><br><span class="line">.slide-right-enter-active,</span><br><span class="line">.slide-right-leave-active,</span><br><span class="line">.slide-left-enter-active,</span><br><span class="line">.slide-left-leave-active &#123;</span><br><span class="line">  transition: all 1s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-right-enter &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(-100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">.slide-right-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">.slide-left-enter &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">.slide-left-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(-100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>总结一下，我们发现</p>
<p>Vue的优势包括：</p>
<ul>
<li>模板和渲染函数的弹性选择</li>
<li>简单的语法及项目创建</li>
<li>更快的渲染速度和更小的体积</li>
</ul>
<p>React的优势包括：</p>
<ul>
<li>更适用于大型应用和更好的可测试性</li>
<li>同时适用于Web端和原生App</li>
<li>更大的生态圈带来的更多支持和工具</li>
</ul>
<p>而实际上，React和Vue都是非常优秀的框架，它们之间的相似之处多过不同之处，并且它们大部分最棒的功能是相通的：</p>
<ul>
<li>利用虚拟DOM实现快速渲染</li>
<li>轻量级</li>
<li>响应式和组件化</li>
<li>服务器端渲染</li>
<li>易于集成路由工具，打包工具以及状态管理工具</li>
<li>优秀的支持和社区</li>
</ul>
<h1 id="三、vue-element-amdin介绍"><a href="#三、vue-element-amdin介绍" class="headerlink" title="三、vue-element-amdin介绍"></a>三、vue-element-amdin介绍</h1><p>vue-element-admin 是一个后台前端解决方案，它基于 vue 和 element-ui实现。它使用了最新的前端技术栈，内置了 i18 国际化解决方案，动态路由，权限验证，提炼了典型的业务模型，提供了丰富的功能组件，它可以帮助你快速搭建企业级中后台产品原型。</p>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">- 登录 / 注销</span><br><span class="line"></span><br><span class="line">- 权限验证</span><br><span class="line">  - 页面权限</span><br><span class="line">  - 指令权限</span><br><span class="line">  - 权限配置</span><br><span class="line">  - 二步登录</span><br><span class="line"></span><br><span class="line">- 多环境发布</span><br><span class="line">  - dev sit stage prod</span><br><span class="line"></span><br><span class="line">- 全局功能</span><br><span class="line">  - 国际化多语言</span><br><span class="line">  - 多种动态换肤</span><br><span class="line">  - 动态侧边栏（支持多级路由嵌套）</span><br><span class="line">  - 动态面包屑</span><br><span class="line">  - 快捷导航(标签页)</span><br><span class="line">  - Svg Sprite 图标</span><br><span class="line">  - 本地/后端 mock 数据</span><br><span class="line">  - Screenfull全屏</span><br><span class="line">  - 自适应收缩侧边栏</span><br><span class="line"></span><br><span class="line">- 编辑器</span><br><span class="line">  - 富文本</span><br><span class="line">  - Markdown</span><br><span class="line">  - JSON 等多格式</span><br><span class="line"></span><br><span class="line">- Excel</span><br><span class="line">  - 导出excel</span><br><span class="line">  - 导入excel</span><br><span class="line">  - 前端可视化excel</span><br><span class="line">  - 导出zip</span><br><span class="line"></span><br><span class="line">- 表格</span><br><span class="line">  - 动态表格</span><br><span class="line">  - 拖拽表格</span><br><span class="line">  - 内联编辑</span><br><span class="line"></span><br><span class="line">- 错误页面</span><br><span class="line">  - 401</span><br><span class="line">  - 404</span><br><span class="line"></span><br><span class="line">- 組件</span><br><span class="line">  - 头像上传</span><br><span class="line">  - 返回顶部</span><br><span class="line">  - 拖拽Dialog</span><br><span class="line">  - 拖拽Select</span><br><span class="line">  - 拖拽看板</span><br><span class="line">  - 列表拖拽</span><br><span class="line">  - SplitPane</span><br><span class="line">  - Dropzone</span><br><span class="line">  - Sticky</span><br><span class="line">  - CountTo</span><br><span class="line"></span><br><span class="line">- 综合实例</span><br><span class="line">- 错误日志</span><br><span class="line">- Dashboard</span><br><span class="line">- 引导页</span><br><span class="line">- ECharts 图表</span><br><span class="line">- Clipboard(剪贴复制)</span><br><span class="line">- Markdown2html</span><br></pre></td></tr></table></figure>

<p>本项目不支持低版本浏览器(如 ie)，有需求请自行添加 polyfill <a href="https://github.com/PanJiaChen/vue-element-admin/wiki#babel-polyfill" target="_blank" rel="noopener">详情</a></p>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">├── build                      # 构建相关</span><br><span class="line">├── mock                       # 项目mock 模拟数据</span><br><span class="line">├── plop-templates             # 基本模板</span><br><span class="line">├── public                     # 静态资源</span><br><span class="line">│   │── favicon.ico            # favicon图标</span><br><span class="line">│   └── index.html             # html模板</span><br><span class="line">├── src                        # 源代码</span><br><span class="line">│   ├── api                    # 所有请求</span><br><span class="line">│   ├── assets                 # 主题 字体等静态资源</span><br><span class="line">│   ├── components             # 全局公用组件</span><br><span class="line">│   ├── directive              # 全局指令</span><br><span class="line">│   ├── filters                # 全局 filter</span><br><span class="line">│   ├── icons                  # 项目所有 svg icons</span><br><span class="line">│   ├── lang                   # 国际化 language</span><br><span class="line">│   ├── layout                 # 全局 layout</span><br><span class="line">│   ├── router                 # 路由</span><br><span class="line">│   ├── store                  # 全局 store管理</span><br><span class="line">│   ├── styles                 # 全局样式</span><br><span class="line">│   ├── utils                  # 全局公用方法</span><br><span class="line">│   ├── vendor                 # 公用vendor</span><br><span class="line">│   ├── views                  # views 所有页面</span><br><span class="line">│   ├── App.vue                # 入口页面</span><br><span class="line">│   ├── main.js                # 入口文件 加载组件 初始化等</span><br><span class="line">│   └── permission.js          # 权限管理</span><br><span class="line">├── tests                      # 测试</span><br><span class="line">├── .env.xxx                   # 环境变量配置</span><br><span class="line">├── .eslintrc.js               # eslint 配置项</span><br><span class="line">├── .babelrc                   # babel-loader 配置</span><br><span class="line">├── .travis.yml                # 自动化CI配置</span><br><span class="line">├── vue.config.js              # vue-cli 配置</span><br><span class="line">├── postcss.config.js          # postcss 配置</span><br><span class="line">└── package.json               # package.json</span><br></pre></td></tr></table></figure>

<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 克隆项目</span><br><span class="line">git clone https://github.com/PanJiaChen/vue-element-admin.git</span><br><span class="line"></span><br><span class="line"># 进入项目目录</span><br><span class="line">cd vue-element-admin</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"># 建议不要用 cnpm 安装 会有各种诡异的bug 可以通过如下操作解决 npm 下载速度慢的问题</span><br><span class="line">npm install --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"># 本地开发 启动项目</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p><a href="https://panjiachen.github.io/vue-element-admin/" target="_blank" rel="noopener">预览地址</a></p>
<h1 id="四、fund-cms前端项目实例"><a href="#四、fund-cms前端项目实例" class="headerlink" title="四、fund-cms前端项目实例"></a>四、fund-cms前端项目实例</h1><p>基金cms管理系统是基于vue-element-amdin框架并通过upm单点登录方式实现的后台管理系统。数据库用的是mongodb实现并输出api接口。</p>
<h4 id="单点登录"><a href="#单点登录" class="headerlink" title="单点登录"></a>单点登录</h4><p>进入页面判断cookie是否存在，不存在则跳到upm系统进行登录，登录成功自动跳回并带cookie参数。然后取到cookie值并手动种上，此时可以访问api接口。访问接口时如果cookie过期返回错误标识，前端判断自动调到upm登录系统重新登录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 获取upm单点登录 cookie</span><br><span class="line">const &#123; ticket &#125; = param2Obj(window.location.search) || &apos;&apos;</span><br><span class="line">if (ticket) &#123;</span><br><span class="line">  setToken(ticket)</span><br><span class="line">  const newUrl = location.href.replace(location.search, &apos;&apos;)</span><br><span class="line">  window.location.href = newUrl</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 判断单点登录 cookie</span><br><span class="line">if (!getToken()) &#123;</span><br><span class="line">  logoutRedirect()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 退出并跳转</span><br><span class="line"> */</span><br><span class="line">export function logoutRedirect() &#123;</span><br><span class="line">  const toUrl = process.env.VUE_APP_BASE_TOLOGIN + &apos;/auth?appkey=fund-cms&amp;return=&apos; + window.location.href</span><br><span class="line">  if (process.env.NODE_ENV !== &apos;development&apos;) &#123;</span><br><span class="line">    window.location.href = toUrl</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>静态路由：登录进入系统就可以看到的菜单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * constantRoutes</span><br><span class="line"> * a base page that does not have permission requirements</span><br><span class="line"> * all roles can be accessed</span><br><span class="line"> */</span><br><span class="line">export const constantRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;/404&apos;,</span><br><span class="line">    component: () =&gt; import(&apos;@/views/error-page/404&apos;),</span><br><span class="line">    hidden: true</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;&apos;,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: &apos;dashboard&apos;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;dashboard&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/dashboard/index&apos;),</span><br><span class="line">        name: &apos;Dashboard&apos;,</span><br><span class="line">        meta: &#123; title: &apos;dashboard&apos;, icon: &apos;dashboard&apos;, affix: true &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;/selection&apos;,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: &apos;/selection/module&apos;,</span><br><span class="line">    alwaysShow: true, // will always show the root menu</span><br><span class="line">    name: &apos;Selection&apos;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &apos;精选&apos;,</span><br><span class="line">      icon: &apos;shopping&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;module&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/selection/module&apos;),</span><br><span class="line">        name: &apos;ModuleSelection&apos;,</span><br><span class="line">        hidden: true,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;模块管理&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        path: &apos;search&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/selection/search&apos;),</span><br><span class="line">        name: &apos;SearchSelection&apos;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;搜索&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        path: &apos;fengj&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/selection/fengj&apos;),</span><br><span class="line">        name: &apos;FengjSelection&apos;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;凤金精选&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;  </span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>动态路由：需要用户权限匹配才能显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">export const asyncRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;/permission&apos;,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: &apos;/permission/page&apos;,</span><br><span class="line">    alwaysShow: true, // will always show the root menu</span><br><span class="line">    name: &apos;Permission&apos;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &apos;permission&apos;,</span><br><span class="line">      icon: &apos;lock&apos;,</span><br><span class="line">      roles: [&apos;admin&apos;, &apos;editor&apos;] // you can set roles in root nav</span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;page&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/permission/page&apos;),</span><br><span class="line">        name: &apos;PagePermission&apos;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;pagePermission&apos;,</span><br><span class="line">          roles: [&apos;admin&apos;] // or you can only set roles in sub nav</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;directive&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/permission/directive&apos;),</span><br><span class="line">        name: &apos;DirectivePermission&apos;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;directivePermission&apos;</span><br><span class="line">          // if do not set roles, means: this page does not require permission</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;role&apos;,</span><br><span class="line">        component: () =&gt; import(&apos;@/views/permission/role&apos;),</span><br><span class="line">        name: &apos;RolePermission&apos;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &apos;rolePermission&apos;,</span><br><span class="line">          roles: [&apos;admin&apos;]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><p>接口api通过axios封装，支持环境变量配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import &#123; Message &#125; from &apos;element-ui&apos;</span><br><span class="line">// import store from &apos;@/store&apos;</span><br><span class="line">import &#123; removeToken &#125; from &apos;@/utils/auth&apos;</span><br><span class="line">import &#123; logoutRedirect &#125; from &apos;@/utils&apos;</span><br><span class="line">// create an axios instance</span><br><span class="line">const service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url</span><br><span class="line">  // withCredentials: true, // send cookies when cross-domain requests</span><br><span class="line">  timeout: 5000 // request timeout</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置：selection.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import request from &apos;@/utils/request&apos;</span><br><span class="line">//get api</span><br><span class="line">export function fengjList(params) &#123;</span><br><span class="line">  return request(&#123;</span><br><span class="line">    url: &apos;/fengj-management/fengjlist&apos;,</span><br><span class="line">    method: &apos;get&apos;,</span><br><span class="line">    params</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">//post api</span><br><span class="line">export function updateOpenStatus(data) &#123;</span><br><span class="line">  return request(&#123;</span><br><span class="line">    url: &apos;/module-management/openmodule/update&apos;,</span><br><span class="line">    method: &apos;post&apos;,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用：fengj.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fengjList &#125; from &apos;@/api/selection&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;FengjSelection&apos;,</span><br><span class="line">  components: &#123; FengjPreview, FengjTable &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: null,</span><br><span class="line">      userTypeOptions: [],</span><br><span class="line">      showUserTypes: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getList() &#123;</span><br><span class="line">      fengjList().then(response =&gt; &#123;</span><br><span class="line">        const &#123; items &#125; = response.data || []</span><br><span class="line">        this.list = items.sort((a, b) =&gt; b.status - a.status)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="开发遇到问题"><a href="#开发遇到问题" class="headerlink" title="开发遇到问题"></a>开发遇到问题</h4><p>1.状态排序<br>数据库里没有status字段，前端拿到数据后再重新排一下序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  getList() &#123;</span><br><span class="line">    fengjList().then(response =&gt; &#123;</span><br><span class="line">      const &#123; items &#125; = response.data || []</span><br><span class="line">      this.list = items.sort((a, b) =&gt; b.status - a.status)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.表单添加动态校验<br>基金产品输入基金code读api异步获取联动。<br>缺点是调两次api。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; searchFundInfo &#125; from &apos;@/api/common&apos;</span><br><span class="line">data() &#123;</span><br><span class="line">  const checkCode = async(rule, value, callback) =&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      await searchFundInfo(&#123; key: value &#125;)</span><br><span class="line">      callback()</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">      return callback(new Error(err.message))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return &#123;</span><br><span class="line">    rules: &#123;</span><br><span class="line">      code: [&#123; required: true, message: &apos;基金代码不能为空&apos;, trigger: &apos;blur&apos; &#125;, &#123; validator: checkCode, trigger: &apos;blur&apos; &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.列表组件格式化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;用户类型&quot; prop=&quot;userType&quot; align=&quot;center&quot; :formatter=&quot;formatter&quot; /&gt;</span><br><span class="line">methods: &#123;</span><br><span class="line">  formatter(row, column) &#123;</span><br><span class="line">    const &#123; userType &#125; = row</span><br><span class="line">    const nameArr = []</span><br><span class="line">    this.userTypeOptions.forEach((item) =&gt; &#123;</span><br><span class="line">      if (userType.includes(item.type)) &#123;</span><br><span class="line">        nameArr.push(item.name)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return nameArr.join()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.子组件调用父组件方法<br>表单更新后，预览区实现自动更新。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$emit(&apos;updateList&apos;)</span><br><span class="line">//父组件</span><br><span class="line">&lt;fengj-table :list=&quot;list&quot; :user-type-options=&quot;userTypeOptions&quot; @updateList=&quot;getList&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>5.阻止冒泡方法@click.stop<br>咨询列表点击显示预览区和字典联动，操作按钮需要做阻止冒泡处理。（阻止默认行为：@click.prevent）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;success&quot; size=&quot;mini&quot; @click.stop=&quot;handleUpdate(row)&quot;&gt;</span><br><span class="line">  编辑</span><br><span class="line">&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>

<p>6.文本编辑器缓存问题<br>列表点编辑时候，文本编辑器缓存清不掉，显示上一次的内容,因为用的第三方插件。<br>解决办法添加更新方法，传时间戳，组件内监听更新。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Tinymce ref=&quot;editor&quot; v-model=&quot;temp.content&quot; :update-con=&quot;updateCon&quot; :height=&quot;200&quot; /&gt;</span><br><span class="line">//点编辑弹层显示时候</span><br><span class="line">handleUpdate(row) &#123;</span><br><span class="line">  this.temp = Object.assign(&#123;&#125;, row) // copy obj</span><br><span class="line">  this.temp.startTime = new Date(this.temp.startTime)</span><br><span class="line">  this.dialogStatus = &apos;update&apos;</span><br><span class="line">  this.dialogFormVisible = true</span><br><span class="line">  this.$nextTick(() =&gt; &#123;</span><br><span class="line">    this.$refs[&apos;dataForm&apos;].clearValidate()</span><br><span class="line">    this.updateCon = new Date().getTime()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Tinymce.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    value(val) &#123;</span><br><span class="line">      if (!this.hasChange &amp;&amp; this.hasInit) &#123;</span><br><span class="line">        this.$nextTick(() =&gt;</span><br><span class="line">          window.tinymce.get(this.tinymceId).setContent(this.val || &apos;&apos;))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    language() &#123;</span><br><span class="line">      this.destroyTinymce()</span><br><span class="line">      this.$nextTick(() =&gt; this.initTinymce())</span><br><span class="line">    &#125;,</span><br><span class="line">    updateCon(val) &#123;</span><br><span class="line">      this.$nextTick(() =&gt;</span><br><span class="line">        window.tinymce &amp;&amp; window.tinymce.get(this.tinymceId).setContent(this.newVal || &apos;&apos;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.文本编辑器扩展上传图片功能<br>Tinymce.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;&#123;fullscreen:fullscreen&#125;&quot; class=&quot;tinymce-container&quot; :style=&quot;&#123;width:containerWidth&#125;&quot;&gt;</span><br><span class="line">    &lt;textarea :id=&quot;tinymceId&quot; class=&quot;tinymce-textarea&quot; /&gt;</span><br><span class="line">    &lt;div class=&quot;editor-custom-btn-container&quot;&gt;</span><br><span class="line">      &lt;editorImage color=&quot;#1890ff&quot; class=&quot;editor-upload-btn&quot; @successCBK=&quot;imageSuccessCBK&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">//上传成功图片插入文本编辑器中</span><br><span class="line">imageSuccessCBK(arr) &#123;</span><br><span class="line">  const _this = this</span><br><span class="line">  arr.forEach(v =&gt; &#123;</span><br><span class="line">    window.tinymce.get(_this.tinymceId).insertContent(`&lt;img class=&quot;wscnph&quot; src=&quot;$&#123;v.url&#125;&quot; &gt;`)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编辑上传图片组件：EditorImage.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload</span><br><span class="line">  :multiple=&quot;true&quot;</span><br><span class="line">  :file-list=&quot;fileList&quot;</span><br><span class="line">  :show-file-list=&quot;true&quot;</span><br><span class="line">  :on-remove=&quot;handleRemove&quot;</span><br><span class="line">  :on-success=&quot;handleSuccess&quot;</span><br><span class="line">  :before-upload=&quot;beforeUpload&quot;</span><br><span class="line">  class=&quot;editor-slide-upload&quot;</span><br><span class="line">  :action=&quot;uploadUrl&quot;</span><br><span class="line">  list-type=&quot;picture-card&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;</span><br><span class="line">    点击上传</span><br><span class="line">  &lt;/el-button&gt;</span><br><span class="line">&lt;/el-upload&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  uploadUrl() &#123;</span><br><span class="line">    const url = process.env.VUE_APP_BASE_API + &apos;/upload/uploadfile&apos;</span><br><span class="line">    return url</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开发总结：vue-element-admin框架搭建后台管理系统还是比较不错，架构清晰，功能全面，上手快。结合mongodb就可以前端一站式完成项目开发。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.hypo1986.com/blog/2019/10/22/2019-10-22-vue-element-admin/" data-id="clc6zltek0005vsx0qdgbu90k" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/">vue</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2019/11/27/2019-11-27-websocket/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          websocket介绍及应用
        
      </div>
    </a>
  
  
    <a href="/blog/2019/09/18/2019-09-18-koa2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">koa2框架介绍及搭建</div>
    </a>
  
</nav>

  
</article>



  <section id="comments" class="vcomment">
  </section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/感悟/">感悟</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/FormData/" style="font-size: 10px;">FormData</a> <a href="/blog/tags/ReactEchart/" style="font-size: 10px;">ReactEchart</a> <a href="/blog/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/blog/tags/es6/" style="font-size: 20px;">es6</a> <a href="/blog/tags/js/" style="font-size: 10px;">js</a> <a href="/blog/tags/js组件/" style="font-size: 10px;">js组件</a> <a href="/blog/tags/selectionStart/" style="font-size: 10px;">selectionStart</a> <a href="/blog/tags/uniapp/" style="font-size: 10px;">uniapp</a> <a href="/blog/tags/valine/" style="font-size: 10px;">valine</a> <a href="/blog/tags/vue/" style="font-size: 20px;">vue</a> <a href="/blog/tags/webrtc-streamer/" style="font-size: 10px;">webrtc-streamer</a> <a href="/blog/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/blog/tags/前端感悟/" style="font-size: 10px;">前端感悟</a> <a href="/blog/tags/前端规范/" style="font-size: 10px;">前端规范</a> <a href="/blog/tags/微信小程序/" style="font-size: 10px;">微信小程序</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/06/">六月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2022/12/28/webrtc-streamer/">webrtc-streamer实现网页直播摄像头rstp</a>
          </li>
        
          <li>
            <a href="/blog/2022/08/15/fesharefeeling/">分享和前端的感悟</a>
          </li>
        
          <li>
            <a href="/blog/2022/08/11/handsign/">h5手写签名</a>
          </li>
        
          <li>
            <a href="/blog/2022/08/10/frontendspecification/">前端开发规范整理</a>
          </li>
        
          <li>
            <a href="/blog/2021/10/21/weimini-env/">微信小程序环境变量配置方法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Hypo.Wang
      <a class="foot-icp" href="http://beian.miit.gov.cn">京ICP备15045595号-1</a>
      <br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">首页</a>
  
    <a href="/blog/archives" class="mobile-nav-link">归档</a>
  
    <a href="/blog/about" class="mobile-nav-link">关于</a>
  
</nav>
    
  
  <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
  
  
    <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
    <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>
  
  
  <script src="/blog/js/script.js"></script>
  

  
  
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  <script>
      var GUEST_INFO = ['nick','mail','link'];
      var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
      });
      var notify = 'false' == true;
      var verify = 'false' == true;
      new Valine({
          el: '.vcomment',
          notify: notify,
          verify: verify,
          appId: "792fH5y98m6Ti763jlgxgqpQ-gzGzoHsz",
          appKey: "TtpF8CKsQAMHzqvvpLhU4N1s",
          placeholder: "请输入",
          pageSize: '10',
          avatar: 'mm',
          lang: 'zh-cn',
          visitor: 'true'
      });
  </script>
  
  </div>
</body>
</html>